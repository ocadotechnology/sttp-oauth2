(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[634],{7119:function(t,e,n){"use strict";n.r(e),n.d(e,{frontMatter:function(){return s},metadata:function(){return a},toc:function(){return p},default:function(){return d}});var o=n(2122),i=n(9756),r=(n(7294),n(3905)),s={sidebar_position:5,description:"Token introspection"},a={unversionedId:"token-introspection",id:"token-introspection",isDocsHomePage:!1,title:"Token introspection",description:"Token introspection",source:"@site/../mdoc/target/mdoc/token-introspection.md",sourceDirName:".",slug:"/token-introspection",permalink:"/sttp-oauth2/docs/token-introspection",editUrl:"https://github.com/ocadotechnology/sttp-oauth2/edit/main/docs/token-introspection.md",version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,description:"Token introspection"},sidebar:"tutorialSidebar",previous:{title:"Contributing to sttp-oauth2",permalink:"/sttp-oauth2/docs/contributing"},next:{title:"Migrating to newer versions",permalink:"/sttp-oauth2/docs/migrating"}},p=[],c={toc:p};function d(t){var e=t.components,n=(0,i.Z)(t,["components"]);return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Token introspection interface provides one method, that helps you ask the OAuth2 provider details about the token. The response is described in ",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7662#section-2.2"},"rfc7662 section 2.2"),". The only guaranteed field is ",(0,r.kt)("inlineCode",{parentName:"p"},"active")," that determines if the token is still valid."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-scala"},"trait TokenIntrospection[F[_]] {\n\n  /** Introspects passed token in OAuth2 provider.\n    *\n    * Successful introspections returns `F[TokenIntrospectionResponse.IntrospectionResponse]`.\n    */\n  def introspect(token: Secret[String]): F[Introspection.TokenIntrospectionResponse]\n\n}\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"oauth2-cache-cats")," module provides the cached version of this interface ",(0,r.kt)("inlineCode",{parentName:"p"},"CachingTokenIntrospection")," that allows you to limit the calls to the OAuth2 provider. To use it you need to provide regular ",(0,r.kt)("inlineCode",{parentName:"p"},"TokenIntrospection"),", the cache implementation and the default expiration time, since the introspection response doesn't necessarily provide such information."),(0,r.kt)("p",null,"The cache implementation can be anything that implements ",(0,r.kt)("inlineCode",{parentName:"p"},"ExpiringCache")," trait, for the out of the box solution use ",(0,r.kt)("inlineCode",{parentName:"p"},"CatsRefExpiringCache"),", but keep in mind the memory consumption - that instance doesn't limit the list of tokens kept."))}d.isMDXComponent=!0}}]);